<!DOCTYPE html>
<html lang="en" class="scroll-smooth overflow-x-hidden">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vishwaloka Vandana</title>
    <link rel="icon" type="image/x-icon" href="logo.png">
    <meta
      name="description"
      content="Premium pilgrimage services offering transformative spiritual journeys."
    />

    <script src="https://cdn.tailwindcss.com"></script>
    
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet" />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;700&family=Playfair+Display:ital,wght@0,400;0,600;0,800;1,400&family=Noto+Sans+Sinhala:wght@300;400;600;800&display=swap"
      rel="stylesheet"
    />

    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              brand: {
                gold: "#D4AF37",
                goldLight: "#F5E6C4",
                maroon: "#590000",
                maroonLight: "#800000",
                gray: "#F9FAFB",
                text: "#1F2937",
                bg: '#F8F5F2', 
                dark: '#0f0f0f',
              },
            },
            fontFamily: {
              sans: ["Outfit", "Noto Sans Sinhala", "sans-serif"],
              serif: ["Playfair Display", "serif"],
            },
            borderRadius: {
              "4xl": "2rem",
              "5xl": "2.5rem",
            },
          },
        },
      };
    </script>
    <style>
      .hero-overlay {
        background: linear-gradient(
          to bottom,
          rgba(89, 0, 0, 0.6),
          rgba(0, 0, 0, 0.5)
        );
      }
      .custom-scrollbar::-webkit-scrollbar {
        width: 6px;
      }
      .custom-scrollbar::-webkit-scrollbar-thumb {
        background: #d4af37;
        border-radius: 10px;
      }

      /* Glass Nav Style */
      .glass-nav {
        background: rgba(89, 0, 0, 0.95);
        backdrop-filter: blur(12px);
      }
      
      /* Sinhala Font Support */
      body.sinhala {
          font-family: 'Noto Sans Sinhala', 'Inter', sans-serif;
      }
      .font-sinhala {
          font-family: 'Noto Sans Sinhala', sans-serif;
      }
    </style>
  </head>

  <body
    class="bg-white text-brand-text antialiased selection:bg-brand-gold selection:text-white overflow-x-hidden"
  >
    <nav
      id="main-navbar"
      class="fixed top-0 left-0 right-0 z-50 text-white transition-all duration-300 border-b-2 border-transparent"
    >
      <div
        class="max-w-7xl mx-auto px-4 md:px-6 h-24 md:h-32 flex items-center justify-between"
      >
        <a href="#" class="flex items-center gap-3 group">
          <img
            src="logo.svg"
            alt="Vishwaloka Vandana Logo"
            class="h-14 md:h-20 w-auto object-contain transition-transform group-hover:scale-105"
            onerror="this.src='logo.svg'"
          />
        </a>

        <div
          class="hidden md:flex items-center gap-8 text-sm font-bold uppercase tracking-widest"
        >
          <a href="#home" class="hover:text-brand-gold transition-colors">Home</a>
          <a href="#tours" class="hover:text-brand-gold transition-colors">Tours</a>
          <a href="#gallery" class="hover:text-brand-gold transition-colors">Gallery</a>
          <a href="#contact" class="hover:text-brand-gold transition-colors">Contact</a>

          <button onclick="toggleLanguage()" class="flex items-center gap-2 font-bold text-sm tracking-widest hover:text-brand-gold transition-colors ml-4">
              <span id="current-lang-display">EN</span>
              <div class="w-8 h-8 rounded-full border border-white/20 flex items-center justify-center">
                  <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                  </svg>
              </div>
          </button>
        </div>

        <button
          onclick="document.getElementById('mobile-menu').classList.remove('translate-x-full')"
          class="md:hidden p-2 text-brand-gold"
        >
          <svg
            class="w-8 h-8"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M4 6h16M4 12h16M4 18h16"
            ></path>
          </svg>
        </button>
      </div>
    </nav>

    <div
      id="mobile-menu"
      class="fixed inset-0 z-[60] bg-brand-maroon text-white flex flex-col items-center justify-center space-y-8 transform translate-x-full transition-transform duration-500 ease-in-out w-screen h-screen overflow-hidden"
    >
      <button
        onclick="document.getElementById('mobile-menu').classList.add('translate-x-full')"
        class="absolute top-6 right-6 text-brand-gold"
      >
        <svg
          class="w-10 h-10"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M6 18L18 6M6 6l12 12"
          ></path>
        </svg>
      </button>
      <a href="#home" class="text-3xl font-serif hover:text-brand-gold" onclick="document.getElementById('mobile-menu').classList.add('translate-x-full')">Home</a>
      <a href="#tours" class="text-3xl font-serif hover:text-brand-gold" onclick="document.getElementById('mobile-menu').classList.add('translate-x-full')">Tours</a>
      <a href="#gallery" class="text-3xl font-serif hover:text-brand-gold" onclick="document.getElementById('mobile-menu').classList.add('translate-x-full')">Gallery</a>
      <a href="#contact" class="text-3xl font-serif hover:text-brand-gold" onclick="document.getElementById('mobile-menu').classList.add('translate-x-full')">Contact</a>
      
      <button onclick="toggleLanguage(); document.getElementById('mobile-menu').classList.add('translate-x-full')"
          class="mt-8 px-8 py-3 rounded-full border border-brand-gold text-brand-gold font-bold tracking-widest uppercase">
          Switch Language
      </button>
    </div>

    <header
      id="home"
      class="relative h-[90vh] flex items-center justify-center overflow-hidden"
    >
      <div class="absolute inset-0 z-0">
        <img
          src="image.jpg"
          alt="Pilgrimage"
          class="w-full h-full object-cover"
        />
        <div class="absolute inset-0 hero-overlay"></div>
      </div>

      <div
        class="relative z-10 text-center max-w-5xl mx-auto px-6"
        data-aos="fade-up"
      >
        <p
          class="text-brand-gold font-bold tracking-[0.4em] uppercase mb-4 text-sm md:text-lg"
          data-key="logo_sub"
        >
          ‡∂Ø‡∑í‡∑Ä‡∑ä‚Äç‡∂∫‡∂∏‡∂∫ ‡∂Ö‡∂≠‡∑ä‡∂Ø‡∑ê‡∂ö‡∑ì‡∂∏‡∂ö‡∑ä ‡∂Ω‡∂∂‡∂±‡∑ä‡∂±
        </p>
        <h1
          class="text-4xl md:text-7xl lg:text-8xl font-serif font-bold text-white mb-6 leading-[1.1]"
          data-key="page_title"
        >
          ‡∑Ä‡∑í‡∑Å‡∑ä‡∑Ä‡∑è‡∂Ω‡∑ù‡∂ö ‡∑Ä‡∂±‡∑ä‡∂Ø‡∂±‡∑è
        </h1>
        <p
          class="text-lg md:text-2xl text-gray-200 font-light max-w-2xl mx-auto mb-10 leading-relaxed"
          data-key="hero_subtitle"
        >
          ‡∂Ö‡∂∞‡∑ä‚Äç‡∂∫‡∑è‡∂≠‡∑ä‡∂∏‡∑í‡∂ö ‡∑É‡∑ê‡∂±‡∑É‡∑ì‡∂∏ ‡∑Ñ‡∑è ‡∑É‡∑î‡∑Ä‡∂¥‡∑Ñ‡∑É‡∑î‡∑Ä ‡∑É‡∂∏‡∂ü‡∑í‡∂±‡∑ä ‡∂¥‡∑ñ‡∂¢‡∂±‡∑ì‡∂∫ ‡∂†‡∑è‡∂ª‡∑í‡∂ö‡∑è ‡∂Ö‡∂≠‡∑ä‡∂Ø‡∑ê‡∂ö‡∑ì‡∂∏‡∂ö‡∑ä.
        </p>

        <a
          href="#tours"
          class="inline-block bg-brand-gold hover:bg-white text-brand-maroon font-extrabold py-4 md:py-5 px-10 md:px-14 rounded-full transition-all duration-300 shadow-2xl transform hover:-translate-y-2 uppercase tracking-widest"
          data-key="view_tours"
        >
          ‡∂†‡∑è‡∂ª‡∑í‡∂ö‡∑è ‡∑É‡∑ú‡∂∫‡∂±‡∑ä‡∂±
        </a>
      </div>
    </header>

    <section class="py-24 bg-white">
      <div class="max-w-7xl mx-auto px-6">
        <div
          class="grid grid-cols-1 md:grid-cols-3 gap-8 md:gap-12 text-center"
        >
          <div
            class="p-8 rounded-4xl bg-brand-gray border border-gray-100 hover:shadow-xl transition-shadow"
            data-aos="fade-up"
          >
            <div
              class="w-20 h-20 mx-auto bg-white rounded-3xl flex items-center justify-center mb-6 text-4xl shadow-sm border border-brand-gold/20"
            >
              üßò‚Äç‚ôÇÔ∏è
            </div>
            <h3
              class="font-serif font-bold text-2xl text-brand-maroon mb-3"
              data-key="service_mindful"
            >
              ‡∑É‡∑í‡∑Ñ‡∑í‡∂∫‡∑ô‡∂±‡∑ä ‡∂∫‡∑î‡∂≠‡∑ä ‡∂†‡∑è‡∂ª‡∑í‡∂ö‡∑è
            </h3>
            <p
              class="text-gray-500 leading-relaxed"
              data-key="service_mindful_desc"
            >
              ‡∂Ö‡∂∑‡∑ä‚Äç‡∂∫‡∂±‡∑ä‡∂≠‡∂ª ‡∑É‡∑è‡∂∏‡∂∫ ‡∂ã‡∂Ø‡∑ô‡∑É‡∑è ‡∂∏‡∑ô‡∑Ñ‡∑ô‡∂∫‡∑Ä‡∂± ‡∂Ω‡∂Ø ‡∑Ä‡∑ê‡∂©‡∑É‡∂ß‡∑Ñ‡∂±‡∑ä.
            </p>
          </div>
          <div
            class="p-8 rounded-4xl bg-brand-gray border border-gray-100 hover:shadow-xl transition-shadow"
            data-aos="fade-up"
            data-aos-delay="100"
          >
            <div
              class="w-20 h-20 mx-auto bg-white rounded-3xl flex items-center justify-center mb-6 text-4xl shadow-sm border border-brand-gold/20"
            >
              ‚≠êÔ∏è
            </div>
            <h3
              class="font-serif font-bold text-2xl text-brand-maroon mb-3"
              data-key="service_luxury"
            >
              ‡∑É‡∑î‡∂õ‡∑ù‡∂¥‡∂∑‡∑ù‡∂ú‡∑ì ‡∂¥‡∑Ñ‡∑É‡∑î‡∑Ä
            </h3>
            <p
              class="text-gray-500 leading-relaxed"
              data-key="service_luxury_desc"
            >
              ‡∂ú‡∂∏‡∂±‡∑ö ‡∑Ä‡∑í‡∂©‡∑è‡∑Ä ‡∂±‡∑í‡∑Ä‡∂± ‡∂â‡∑Ñ‡∑Ö‡∂∏ ‡∂∏‡∂ß‡∑ä‡∂ß‡∂∏‡∑ö ‡∂¥‡∑Ñ‡∑É‡∑î‡∂ö‡∂∏‡∑ä.
            </p>
          </div>
          <div
            class="p-8 rounded-4xl bg-brand-gray border border-gray-100 hover:shadow-xl transition-shadow"
            data-aos="fade-up"
            data-aos-delay="200"
          >
            <div
              class="w-20 h-20 mx-auto bg-white rounded-3xl flex items-center justify-center mb-6 text-4xl shadow-sm border border-brand-gold/20"
            >
              ü§ù
            </div>
            <h3
              class="font-serif font-bold text-2xl text-brand-maroon mb-3"
              data-key="service_guidance"
            >
              ‡∑Ä‡∑í‡∑Å‡∑ä‡∑Ä‡∑è‡∑É‡∑Ä‡∂±‡∑ä‡∂≠ ‡∂∏‡∂ú‡∂¥‡∑ô‡∂±‡∑ä‡∑Ä‡∑ì‡∂∏
            </h3>
            <p
              class="text-gray-500 leading-relaxed"
              data-key="service_guidance_desc"
            >
              ‡∂ú‡∑ê‡∂π‡∑î‡∂ª‡∑î ‡∂Ö‡∑Ä‡∂∂‡∑ù‡∂∞‡∂∫‡∂ö‡∑ä ‡∂á‡∂≠‡∑í ‡∂¥‡∑ä‚Äç‡∂ª‡∑Ä‡∑ì‡∂´ ‡∂∏‡∂ú‡∂¥‡∑ô‡∂±‡∑ä‡∑Ä‡∂±‡∑ä‡∂±‡∂±‡∑ä.
            </p>
          </div>
        </div>
      </div>
    </section>

    <section id="tours" class="py-24 bg-brand-gray relative">
      <div class="max-w-7xl mx-auto px-6">
        <div class="text-center mb-16">
          <span
            class="text-brand-maroon font-bold tracking-widest uppercase text-sm mb-2 block"
            >‡∂Ö‡∂¥‡∂ú‡∑ö ‡∂¥‡∑ê‡∂ö‡∑ö‡∂¢</span
          >
          <h2
            class="text-4xl md:text-6xl font-serif font-bold text-gray-900"
            data-key="section_tours"
          >
            ‡∂¥‡∑ñ‡∂¢‡∂±‡∑ì‡∂∫ ‡∂†‡∑è‡∂ª‡∑í‡∂ö‡∑è
          </h2>
          <div class="w-24 h-1.5 bg-brand-gold mx-auto mt-6 rounded-full"></div>
        </div>

        <div
          id="tours-container"
          class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10"
        >
          <div class="col-span-full h-64 flex flex-col items-center justify-center space-y-4">
            <div class="animate-spin rounded-full h-14 w-14 border-t-4 border-brand-gold border-solid"></div>
            <p class="text-gray-400 font-medium animate-pulse">Loading Sacred Packages...</p>
          </div>
        </div>
      </div>
    </section>

    <section id="gallery" class="py-24 bg-white">
      <div class="max-w-7xl mx-auto px-6">
        <div
          class="flex flex-col md:flex-row justify-between items-center mb-16 gap-6 text-center md:text-left"
        >
          <div>
            <h2
              class="text-4xl md:text-6xl font-serif font-bold text-gray-900 mb-4"
              data-key="our_gallery"
            >
              ‡∂°‡∑è‡∂∫‡∑è‡∂ª‡∑ñ‡∂¥ ‡∂∏‡∂≠‡∂ö‡∂∫‡∂±‡∑ä
            </h2>
            <p class="text-gray-500 text-lg">
              ‡∂Ö‡∂¥‡∂ú‡∑ö ‡∑Ä‡∂±‡∑ä‡∂Ø‡∂±‡∑è ‡∂†‡∑è‡∂ª‡∑í‡∂ö‡∑è ‡∑Ä‡∂Ω ‡∑É‡∑ú‡∂≥‡∑î‡∂ª‡∑î ‡∂Ö‡∑Ä‡∑É‡∑ä‡∂Æ‡∑è.
            </p>
          </div>
          <div class="h-1 w-20 bg-brand-gold hidden md:block"></div>
        </div>

        <div
          id="gallery-container"
          class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6"
        ></div>
      </div>
    </section>

    <footer
      id="contact"
      class="bg-brand-maroon text-white pt-24 pb-12 border-t-8 border-brand-gold"
    >
      <div class="max-w-7xl mx-auto px-6">
        <div
          class="grid grid-cols-1 lg:grid-cols-2 gap-20 pb-20 border-b border-white/10"
        >
          <div data-aos="fade-right">
            <h2
              class="text-4xl md:text-6xl font-serif font-bold mb-8 text-brand-gold"
            >
              Begin Your Journey
            </h2>
            <p class="text-white/70 text-xl leading-relaxed mb-10 max-w-lg">
              Ready to embark on a spiritual pilgrimage? Connect with our
              dedicated team to plan your sacred travel.
            </p>
            <div class="flex flex-col sm:flex-row gap-5">
              <a
                href="https://wa.me/94773434351"
                target="_blank"
                class="bg-brand-gold text-brand-maroon px-10 py-5 rounded-full font-extrabold hover:bg-white transition-all flex items-center justify-center gap-3 shadow-xl"
              >
                <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                  <path
                    d="M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.893 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.884-.001 2.225.651 3.891 1.746 5.634l-.999 3.648 3.742-.981z"
                  />
                </svg>
                <span>WhatsApp Us</span>
              </a>
              <a
                href="tel:+94773434351"
                class="border-2 border-white/20 text-white px-10 py-5 rounded-full font-extrabold hover:bg-white hover:text-brand-maroon transition-all text-center"
              >
                <span>Call Direct</span>
              </a>
            </div>
          </div>

          <div
            class="grid grid-cols-1 sm:grid-cols-2 gap-12"
            data-aos="fade-left"
          >
            <div>
              <h4
                class="font-serif font-bold text-2xl mb-8 text-brand-gold uppercase tracking-widest"
              >
                Navigate
              </h4>
              <ul class="space-y-4 text-white/60 text-lg">
                <li><a href="#home" class="hover:text-brand-gold transition-colors">Home</a></li>
                <li><a href="#tours" class="hover:text-brand-gold transition-colors">Packages</a></li>
                <li><a href="#gallery" class="hover:text-brand-gold transition-colors">Gallery</a></li>
                <li><a href="#contact" class="hover:text-brand-gold transition-colors">Contact</a></li>
              </ul>
            </div>
            <div>
              <h4
                class="font-serif font-bold text-2xl mb-8 text-brand-gold uppercase tracking-widest"
              >
                Contact
              </h4>
              <ul class="space-y-4 text-white/60 text-lg">
                <li>143/B Epalawaththa , Urapola - Sri Lanka</li>
                <li>vishwalokavandana@gmail.com</li>
                <li>+94 77 343 4351</li>
              </ul>
            </div>
          </div>
        </div>

        <div class="flex flex-col md:flex-row justify-between items-center mt-12 text-sm text-white/30 uppercase tracking-widest">
          <p>¬© 2026 Vishwaloka Vandana. All rights reserved.</p>
          <div class="flex gap-8 mt-6 md:mt-0">
            <a href="#" class="hover:text-white transition-colors">Privacy Policy</a>
            <a href="#" class="hover:text-white transition-colors">Terms</a>
          </div>
        </div>
      </div>
    </footer>

    <div id="booking-modal" class="fixed inset-0 z-[100] hidden">
        <div class="absolute inset-0 bg-black/80 backdrop-blur-md transition-opacity" onclick="closeBookingModal()"></div>
        <div class="relative min-h-screen flex items-center justify-center p-4">
            <div class="bg-white rounded-[2.5rem] shadow-2xl w-full max-w-lg overflow-hidden transform scale-95 opacity-0 transition-all" id="modal-panel">
                <div class="bg-brand-maroon p-8 text-white flex justify-between items-center border-b-4 border-brand-gold">
                    <div>
                        <h3 class="text-3xl font-serif font-bold" data-key="booking_title">Book Your Journey</h3>
                        <p class="text-brand-gold font-bold uppercase tracking-widest text-xs mt-2" id="modal-tour-title">Selected Tour</p>
                    </div>
                    <button onclick="closeBookingModal()" class="text-white/60 hover:text-white bg-white/10 p-2 rounded-xl">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                    </button>
                </div>
                <div class="p-8 max-h-[70vh] overflow-y-auto custom-scrollbar bg-brand-gray/30">
                    <form id="booking-form" class="space-y-6">
                        <input type="hidden" id="selected-tour-name" />
                        <div>
                            <label class="block text-xs font-black text-brand-maroon uppercase tracking-widest mb-2" data-key="label_name">Full Name</label>
                            <input type="text" id="cust-name" required class="w-full rounded-2xl border-gray-200 border bg-white px-5 py-4 focus:border-brand-gold focus:ring-2 focus:ring-brand-gold/20 outline-none transition-all"/>
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-xs font-black text-brand-maroon uppercase tracking-widest mb-2" data-key="label_age">Age</label>
                                <input type="number" id="cust-age" required class="w-full rounded-2xl border-gray-200 border bg-white px-5 py-4 focus:border-brand-gold outline-none"/>
                            </div>
                            <div>
                                <label class="block text-xs font-black text-brand-maroon uppercase tracking-widest mb-2" data-key="label_gender">Gender</label>
                                <select id="cust-gender" class="w-full rounded-2xl border-gray-200 border bg-white px-5 py-4 focus:border-brand-gold outline-none">
                                    <option value="Male" data-key="gender_male">Male</option>
                                    <option value="Female" data-key="gender_female">Female</option>
                                </select>
                            </div>
                        </div>
                        <div>
                            <label class="block text-xs font-black text-brand-maroon uppercase tracking-widest mb-2" data-key="label_phone">Phone Number</label>
                            <input type="tel" id="cust-phone" required class="w-full rounded-2xl border-gray-200 border bg-white px-5 py-4 focus:border-brand-gold outline-none"/>
                        </div>
                        <div class="bg-white p-4 rounded-2xl border border-gray-100 shadow-sm">
                            <label class="block text-xs font-black text-brand-maroon uppercase tracking-widest mb-3" data-key="label_passport">Do you have a Passport?</label>
                            <div class="flex gap-8">
                                <label class="flex items-center gap-3 cursor-pointer group">
                                    <input type="radio" name="passport" value="Yes" class="w-5 h-5 accent-brand-maroon" checked/>
                                    <span class="text-gray-700 font-bold" data-key="label_yes">Yes</span>
                                </label>
                                <label class="flex items-center gap-3 cursor-pointer group">
                                    <input type="radio" name="passport" value="No" class="w-5 h-5 accent-brand-maroon"/>
                                    <span class="text-gray-700 font-bold" data-key="label_no">No</span>
                                </label>
                            </div>
                        </div>
                        
                        <div id="passport-number-container">
                            <label class="block text-xs font-black text-brand-maroon uppercase tracking-widest mb-2" data-key="label_passport_num">Passport Number</label>
                            <input type="text" id="cust-passport-num" required class="w-full rounded-2xl border-gray-200 border bg-white px-5 py-4 focus:border-brand-gold outline-none"/>
                        </div>

                        <div>
                            <label class="block text-xs font-black text-brand-maroon uppercase tracking-widest mb-2" data-key="label_nic">ID Number (NIC)</label>
                            <input type="text" id="cust-nic" required class="w-full rounded-2xl border-gray-200 border bg-white px-5 py-4 focus:border-brand-gold outline-none"/>
                        </div>
                        <div>
                            <label class="block text-xs font-black text-brand-maroon uppercase tracking-widest mb-2" data-key="label_dob">Birthday</label>
                            <input type="date" id="cust-dob" required class="w-full rounded-2xl border-gray-200 border bg-white px-5 py-4 focus:border-brand-gold outline-none"/>
                        </div>
                        <button type="submit" class="w-full py-5 bg-brand-maroon text-white font-black uppercase tracking-[0.2em] rounded-2xl shadow-xl hover:bg-black transition-all transform hover:scale-[1.02]" data-key="btn_proceed">
                            Proceed to WhatsApp
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <div id="album-modal" class="fixed inset-0 z-[100] hidden bg-black/95 backdrop-blur-xl">
        <div class="absolute top-0 right-0 p-6 z-50">
            <button onclick="closeAlbumModal()" class="text-white hover:text-brand-gold transition-colors">
                <svg class="w-10 h-10" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
            </button>
        </div>
        <div class="h-full flex flex-col p-6 overflow-hidden">
            <h2 id="modal-album-title" class="text-3xl text-brand-gold font-serif font-bold text-center mb-8 shrink-0">Album Title</h2>
            <div id="modal-album-grid" class="columns-1 md:columns-3 lg:columns-4 gap-6 space-y-6 overflow-y-auto custom-scrollbar pb-20 mx-auto w-full max-w-7xl"></div>
        </div>
    </div>

    <div id="lightbox-modal" class="fixed inset-0 z-[110] hidden bg-black text-white flex items-center justify-center">
        <button onclick="closeLightbox()" class="absolute top-6 right-6 z-50 p-2 hover:text-brand-gold">
            <svg class="w-10 h-10" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
        </button>
        <button onclick="navLightbox(-1)" class="absolute left-4 p-4 hover:text-brand-gold z-50">
            <svg class="w-10 h-10" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
        </button>
        <button onclick="navLightbox(1)" class="absolute right-4 p-4 hover:text-brand-gold z-50">
            <svg class="w-10 h-10" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
        </button>
        <img id="lightbox-image" src="" class="max-h-[90vh] max-w-[90vw] object-contain transition-all duration-300 transform scale-100 opacity-100"/>
        <div id="lightbox-counter" class="absolute bottom-6 left-1/2 transform -translate-x-1/2 font-bold tracking-widest text-brand-gold"></div>
    </div>

    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, getDocs, orderBy, query } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyDGtdOWlC2kFNjjKXsebOjchOdxK-thwX8",
            authDomain: "shwaloka-vandana.firebaseapp.com",
            databaseURL: "https://shwaloka-vandana-default-rtdb.firebaseio.com",
            projectId: "shwaloka-vandana",
            storageBucket: "shwaloka-vandana.firebasestorage.app",
            messagingSenderId: "96798459834",
            appId: "1:96798459834:web:f348541dc3367209fe3f83"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const fallbackImage = "data:image/jpeg;base64,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....";

        const translations = {
            en: {
                logo_main: 'Vishwaloka Vandana',
                logo_sub: 'Sacred Pilgrimage Services',
                page_title: 'Vishwaloka Vandana',
                hero_subtitle: 'Journey beyond the physical. Experience the divine with comfort, guidance, and peace of mind.',
                view_tours: 'Find Procession',
                service_mindful: 'Mindful Travel',
                service_mindful_desc: 'Guided meditation & reflection',
                service_luxury: 'Premium Comfort',
                service_luxury_desc: 'Best-in-class accommodations',
                service_guidance: 'Trusted Guides',
                service_guidance_desc: 'Experts with local knowledge',
                section_tours: 'Sacred Journeys',
                our_gallery: 'Visual Chronicle',
                booking_title: 'Book Your Journey',
                label_name: 'Full Name',
                label_age: 'Age',
                label_gender: 'Gender',
                gender_male: 'Male',
                gender_female: 'Female',
                label_phone: 'Phone Number',
                label_passport: 'Do you have a Passport?',
                label_yes: 'Yes',
                label_no: 'No',
                label_passport_num: 'Passport Number',
                label_nic: 'ID Number (NIC)',
                label_dob: 'Birthday',
                btn_proceed: 'Proceed to WhatsApp',
                book_now: 'Inquire via WhatsApp'
            },
            si: {
                logo_main: '‡∑Ä‡∑í‡∑Å‡∑ä‡∑Ä‡∑è‡∂Ω‡∑ù‡∂ö ‡∑Ä‡∂±‡∑ä‡∂Ø‡∂±‡∑è',
                logo_sub: '‡∂Ø‡∑í‡∑Ä‡∑ä‚Äç‡∂∫‡∂∏‡∂∫ ‡∂Ö‡∂≠‡∑ä‡∂Ø‡∑ê‡∂ö‡∑ì‡∂∏‡∂ö‡∑ä ‡∂Ω‡∂∂‡∂±‡∑ä‡∂±',
                page_title: '‡∑Ä‡∑í‡∑Å‡∑ä‡∑Ä‡∑è‡∂Ω‡∑ù‡∂ö ‡∑Ä‡∂±‡∑ä‡∂Ø‡∂±‡∑è',
                hero_subtitle: '‡∂Ö‡∂∞‡∑ä‚Äç‡∂∫‡∑è‡∂≠‡∑ä‡∂∏‡∑í‡∂ö ‡∑É‡∑ê‡∂±‡∑É‡∑ì‡∂∏ ‡∑Ñ‡∑è ‡∑É‡∑î‡∑Ä‡∂¥‡∑Ñ‡∑É‡∑î‡∑Ä ‡∑É‡∂∏‡∂ü‡∑í‡∂±‡∑ä ‡∂¥‡∑ñ‡∂¢‡∂±‡∑ì‡∂∫ ‡∂†‡∑è‡∂ª‡∑í‡∂ö‡∑è ‡∂Ö‡∂≠‡∑ä‡∂Ø‡∑ê‡∂ö‡∑ì‡∂∏‡∂ö‡∑ä.',
                view_tours: '‡∂†‡∑è‡∂ª‡∑í‡∂ö‡∑è ‡∑É‡∑ú‡∂∫‡∂±‡∑ä‡∂±',
                service_mindful: '‡∑É‡∑í‡∑Ñ‡∑í‡∂∫‡∑ô‡∂±‡∑ä ‡∂∫‡∑î‡∂≠‡∑ä ‡∂†‡∑è‡∂ª‡∑í‡∂ö‡∑è',
                service_mindful_desc: '‡∂Ö‡∂∑‡∑ä‚Äç‡∂∫‡∂±‡∑ä‡∂≠‡∂ª ‡∑É‡∑è‡∂∏‡∂∫ ‡∂ã‡∂Ø‡∑ô‡∑É‡∑è ‡∂∏‡∑ô‡∑Ñ‡∑ô‡∂∫‡∑Ä‡∂± ‡∂Ω‡∂Ø ‡∑Ä‡∑ê‡∂©‡∑É‡∂ß‡∑Ñ‡∂±‡∑ä.',
                service_luxury: '‡∑É‡∑î‡∂õ‡∑ù‡∂¥‡∂∑‡∑ù‡∂ú‡∑ì ‡∂¥‡∑Ñ‡∑É‡∑î‡∑Ä',
                service_luxury_desc: '‡∂ú‡∂∏‡∂±‡∑ö ‡∑Ä‡∑í‡∂©‡∑è‡∑Ä ‡∂±‡∑í‡∑Ä‡∂± ‡∂â‡∑Ñ‡∑Ö‡∂∏ ‡∂∏‡∂ß‡∑ä‡∂ß‡∂∏‡∑ö ‡∂¥‡∑Ñ‡∑É‡∑î‡∂ö‡∂∏‡∑ä.',
                service_guidance: '‡∑Ä‡∑í‡∑Å‡∑ä‡∑Ä‡∑è‡∑É‡∑Ä‡∂±‡∑ä‡∂≠ ‡∂∏‡∂ú‡∂¥‡∑ô‡∂±‡∑ä‡∑Ä‡∑ì‡∂∏',
                service_guidance_desc: '‡∂ú‡∑ê‡∂π‡∑î‡∂ª‡∑î ‡∂Ö‡∑Ä‡∂∂‡∑ù‡∂∞‡∂∫‡∂ö‡∑ä ‡∂á‡∂≠‡∑í ‡∂¥‡∑ä‚Äç‡∂ª‡∑Ä‡∑ì‡∂´ ‡∂∏‡∂ú‡∂¥‡∑ô‡∂±‡∑ä‡∑Ä‡∂±‡∑ä‡∂±‡∂±‡∑ä.',
                section_tours: '‡∂¥‡∑ñ‡∂¢‡∂±‡∑ì‡∂∫ ‡∂†‡∑è‡∂ª‡∑í‡∂ö‡∑è',
                our_gallery: '‡∂°‡∑è‡∂∫‡∑è‡∂ª‡∑ñ‡∂¥ ‡∂∏‡∂≠‡∂ö‡∂∫‡∂±‡∑ä',
                booking_title: '‡∂î‡∂∂‡∑ö ‡∂†‡∑è‡∂ª‡∑í‡∂ö‡∑è‡∑Ä ‡∑Ä‡∑ô‡∂±‡∑ä‡∂ö‡∂ª‡∑Ä‡∑è ‡∂ú‡∂±‡∑ä‡∂±',
                label_name: '‡∑É‡∂∏‡∑ä‡∂¥‡∑ñ‡∂ª‡∑ä‡∂´ ‡∂±‡∂∏',
                label_age: '‡∑Ä‡∂∫‡∑É',
                label_gender: '‡∑É‡∑ä‡∂≠‡∑ä‚Äç‡∂ª‡∑ì/‡∂¥‡∑î‡∂ª‡∑î‡∑Ç ‡∂∑‡∑è‡∑Ä‡∂∫',
                gender_male: '‡∂¥‡∑î‡∂ª‡∑î‡∑Ç',
                gender_female: '‡∑É‡∑ä‡∂≠‡∑ä‚Äç‡∂ª‡∑ì',
                label_phone: '‡∂Ø‡∑î‡∂ª‡∂ö‡∂Æ‡∂± ‡∂Ö‡∂Ç‡∂ö‡∂∫',
                label_passport: '‡∑Ä‡∑í‡∂Ø‡∑ö‡∑Å ‡∂ú‡∂∏‡∂±‡∑ä ‡∂∂‡∂Ω‡∂¥‡∂≠‡∑ä‚Äç‡∂ª‡∂∫‡∂ö‡∑ä ‡∂≠‡∑í‡∂∂‡∑ö‡∂Ø?',
                label_yes: '‡∂î‡∑Ä‡∑ä',
                label_no: '‡∂±‡∑ê‡∂≠',
                label_passport_num: '‡∑Ä‡∑í‡∂Ø‡∑ö‡∑Å ‡∂ú‡∂∏‡∂±‡∑ä ‡∂∂‡∂Ω‡∂¥‡∂≠‡∑ä‚Äç‡∂ª ‡∂Ö‡∂Ç‡∂ö‡∂∫',
                label_nic: '‡∂¢‡∑è‡∂≠‡∑í‡∂ö ‡∑Ñ‡∑ê‡∂≥‡∑î‡∂±‡∑î‡∂∏‡∑ä‡∂¥‡∂≠‡∑ä ‡∂Ö‡∂Ç‡∂ö‡∂∫',
                label_dob: '‡∂ã‡∂¥‡∂±‡∑ä ‡∂Ø‡∑í‡∂±‡∂∫',
                btn_proceed: 'WhatsApp ‡∑Ä‡∑ô‡∂≠ ‡∂∫‡∑ú‡∂∏‡∑î ‡∑Ä‡∂±‡∑ä‡∂±',
                book_now: 'WhatsApp ‡∂∏‡∂ú‡∑í‡∂±‡∑ä ‡∑Ä‡∑í‡∂∏‡∑É‡∂±‡∑ä‡∂±'
            }
        };

        let currentLang = 'si';

        window.selectLanguage = (lang) => {
            currentLang = lang;
            localStorage.setItem('preferredLang', lang);
            applyLanguage(lang);
        };

        window.toggleMobileLang = () => {
            const newLang = currentLang === 'en' ? 'si' : 'en';
            selectLanguage(newLang);
        };

        window.openBookingModal = (tourTitle) => {
            const modal = document.getElementById('booking-modal');
            const panel = document.getElementById('modal-panel');
            const titleEl = document.getElementById('modal-tour-title');
            const hiddenInput = document.getElementById('selected-tour-name');

            if(modal && panel) {
                modal.classList.remove('hidden');
                setTimeout(() => {
                    panel.classList.remove('scale-95', 'opacity-0');
                    panel.classList.add('scale-100', 'opacity-100');
                }, 10);
            }
            if(titleEl) titleEl.innerText = tourTitle;
            if(hiddenInput) hiddenInput.value = tourTitle;
        };

        window.closeBookingModal = () => {
            const modal = document.getElementById('booking-modal');
            const panel = document.getElementById('modal-panel');

            if(panel) {
                panel.classList.remove('scale-100', 'opacity-100');
                panel.classList.add('scale-95', 'opacity-0');
            }
            setTimeout(() => {
                if(modal) modal.classList.add('hidden');
                
                document.getElementById('passport-number-container').classList.remove('hidden');
                document.getElementById('cust-passport-num').setAttribute('required', 'true');
            }, 300);
        };

        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('input[name="passport"]').forEach(radio => {
                radio.addEventListener('change', (e) => {
                    const passportContainer = document.getElementById('passport-number-container');
                    const passportInput = document.getElementById('cust-passport-num');
                    
                    if (e.target.value === 'Yes') {
                        passportContainer.classList.remove('hidden');
                        passportInput.setAttribute('required', 'true');
                    } else {
                        passportContainer.classList.add('hidden');
                        passportInput.removeAttribute('required');
                        passportInput.value = ''; 
                    }
                });
            });

            const form = document.getElementById('booking-form');
            if(form) {
                form.addEventListener('submit', (e) => {
                    e.preventDefault();
                    
                    const tour = document.getElementById('selected-tour-name').value;
                    const name = document.getElementById('cust-name').value;
                    const age = document.getElementById('cust-age').value;
                    const gender = document.getElementById('cust-gender').value;
                    const phone = document.getElementById('cust-phone').value;
                    const passportStatus = document.querySelector('input[name="passport"]:checked').value;
                    const passportNum = document.getElementById('cust-passport-num').value;
                    const nic = document.getElementById('cust-nic').value;
                    const dob = document.getElementById('cust-dob').value;

                    let message = `*New Booking Request*\n\n` +
                        `*Tour:* ${tour}\n` +
                        `*Name:* ${name}\n` +
                        `*Age:* ${age}\n` +
                        `*Gender:* ${gender}\n` +
                        `*Phone:* ${phone}\n` +
                        `*Has Passport:* ${passportStatus}\n`;

                    if (passportStatus === 'Yes') {
                        message += `*Passport No:* ${passportNum}\n`;
                    }

                    message += `*NIC:* ${nic}\n` +
                        `*Birthday:* ${dob}\n\n` +
                        `_Please confirm availability._`;

                    const url = `https://wa.me/94773434351?text=${encodeURIComponent(message)}`;
                    window.open(url, '_blank');
                    closeBookingModal();
                    form.reset();
                });
            }
        });

        const applyLanguage = (lang) => {
            const body = document.body;
            if (lang === 'si') {
                body.classList.add('font-sinhala');
                body.classList.remove('font-sans');
            } else {
                body.classList.remove('font-sinhala');
                body.classList.add('font-sans');
            }

            const display = document.getElementById('current-lang-display');
            if (display) display.innerText = lang.toUpperCase();

            document.querySelectorAll('[data-key]').forEach(el => {
                const key = el.getAttribute('data-key');
                if (translations[lang] && translations[lang][key]) {
                    el.innerHTML = translations[lang][key];
                }
            });

            const btnText = translations[lang] ? translations[lang].book_now : 'Inquire';
            document.querySelectorAll('.book-btn-text').forEach(el => {
                el.innerText = btnText;
            });
        };

        const formatPrice = (price) => {
            if (!price) return 'Contact for Price';
            return new Intl.NumberFormat('si-LK', { style: 'currency', currency: 'LKR', maximumFractionDigits: 0 }).format(price);
        };

        async function fetchTours() {
            const container = document.getElementById('tours-container');
            if (!container) return;

            try {
                const q = query(collection(db, "tours"), orderBy("created_at", "desc"));
                const querySnapshot = await getDocs(q);

                const tours = [];
                querySnapshot.forEach((doc) => {
                    tours.push({ id: doc.id, ...doc.data() });
                });

                if (tours.length === 0) {
                    container.innerHTML = `
                        <div class="col-span-full flex flex-col items-center justify-center py-20 text-center animate-pulse">
                            <p class="text-gray-400 font-medium">‡∂±‡∑Ä ‡∂†‡∑è‡∂ª‡∑í‡∂ö‡∑è ‡∑É‡∑ê‡∂Ω‡∑É‡∑î‡∂∏‡∑ä ‡∂ö‡∂ª‡∂∏‡∑í‡∂±‡∑ä ‡∂¥‡∑Ä‡∂≠‡∑ì.</p>
                        </div>`;
                    return;
                }

                container.innerHTML = tours.map((tour, index) => `
                    <div class="group relative bg-white rounded-[2rem] p-3 shadow-lg hover:shadow-2xl transition-all duration-500 hover:-translate-y-2 h-full flex flex-col" data-aos="fade-up" data-aos-delay="${index * 100}">
                        <div class="relative h-64 w-full overflow-hidden rounded-[1.5rem] bg-gray-100">
                            <img src="${tour.image_url}" alt="${tour.title}" 
                                class="w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-700" 
                                onerror="this.src=fallbackImage">
                            <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-60"></div>
                            <div class="absolute top-4 right-4 bg-white/90 backdrop-blur-md px-4 py-2 rounded-full shadow-lg">
                                <span class="text-sm font-bold text-brand-maroon">${formatPrice(tour.price)}</span>
                            </div>
                        </div>
                        <div class="p-4 flex-grow flex flex-col mt-2">
                            <h3 class="text-xl font-serif font-bold text-gray-900 mb-2 leading-tight group-hover:text-brand-maroon transition-colors">
                                ${tour.title}
                            </h3>
                            <p class="text-gray-500 text-sm line-clamp-3 mb-6 font-light leading-relaxed flex-grow">
                                ${tour.description}
                            </p>
                            <button onclick="openBookingModal('${tour.title.replace(/'/g, "\\'")}')" 
                               class="mt-auto w-full py-4 rounded-xl bg-brand-gray hover:bg-brand-maroon text-brand-maroon hover:text-white font-bold text-sm tracking-widest uppercase transition-all duration-300 flex items-center justify-center gap-2 group-btn cursor-pointer">
                                <span class="book-btn-text">${translations[currentLang] ? translations[currentLang].book_now : 'Book Now'}</span>
                            </button>
                        </div>
                    </div>
                `).join('');

            } catch (error) {
                console.error('Error fetching tours:', error);
                container.innerHTML = '<p class="text-center col-span-full text-red-400">Unable to load tours.</p>';
            }

            applyLanguage(currentLang);
        }

        const albumsCache = {};

        async function fetchAlbums() {
            const container = document.getElementById('gallery-container');
            if (!container) return;

            try {
                const q = query(collection(db, "albums"), orderBy("created_at", "desc"));
                const querySnapshot = await getDocs(q);

                const albums = [];
                querySnapshot.forEach((doc) => {
                    const data = doc.data();
                    albums.push({ id: doc.id, ...data });
                    albumsCache[doc.id] = data;
                });

                if (albums.length === 0) {
                    container.innerHTML = '<p class="text-center text-gray-400 col-span-full py-10">Coming soon...</p>';
                    return;
                }

                container.innerHTML = albums.map((album, index) => {
                    const cover = (album.images && album.images.length > 0) ? album.images[0] : 'images/logo.svg';
                    const count = album.images ? album.images.length : 0;
                    
                    return `
                    <div onclick="openAlbumModal('${album.id}')" class="group relative aspect-[4/3] rounded-[2.5rem] overflow-hidden cursor-pointer shadow-lg transition-all duration-500 transform hover:-translate-y-2" data-aos="fade-up" data-aos-delay="${index * 100}">
                        <img src="${cover}" alt="${album.title}" 
                            class="w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-1000 brightness-90 group-hover:brightness-100">
                        <div class="absolute inset-0 bg-gradient-to-t from-brand-maroon/90 via-transparent to-transparent opacity-80 group-hover:opacity-100 transition-opacity"></div>
                        <div class="absolute bottom-0 left-0 right-0 p-8 translate-y-2 group-hover:translate-y-0 transition-transform duration-500">
                            <h3 class="text-2xl font-serif font-bold text-white mb-2">${album.title}</h3>
                            <div class="flex items-center gap-2">
                                <span class="bg-brand-gold text-brand-maroon text-xs font-bold px-2 py-1 rounded-md uppercase tracking-wider">${count} PHOTOS</span>
                            </div>
                        </div>
                    </div>
                `}).join('');

            } catch (error) {
                console.error('Error fetching albums:', error);
            }
        }

        window.openAlbumModal = (albumId) => {
            const album = albumsCache[albumId];
            if(!album) return;
            
            const modal = document.getElementById('album-modal');
            const titleEl = document.getElementById('modal-album-title');
            const grid = document.getElementById('modal-album-grid');
            
            if(modal) {
                modal.classList.remove('hidden');
                document.body.style.overflow = 'hidden';
            }
            if(titleEl) titleEl.innerText = album.title;
            
            if(grid) {
                if(album.images && album.images.length > 0) {
                    window.currentAlbumImages = album.images;
                    grid.innerHTML = album.images.map((url, index) => `
                        <div onclick="openLightbox(${index})" class="break-inside-avoid mb-6 rounded-2xl overflow-hidden shadow-lg group relative cursor-pointer">
                            <img src="${url}" class="w-full h-auto object-cover transform group-hover:scale-105 transition-transform duration-700" loading="lazy">
                        </div>
                    `).join('');
                } else {
                     grid.innerHTML = '<p class="text-white/50 text-center py-20 bg-white/5 rounded-2xl col-span-full">No images in this album yet.</p>';
                }
            }
        };

        window.closeAlbumModal = () => {
            const modal = document.getElementById('album-modal');
            if(modal) {
                modal.classList.add('hidden');
                document.body.style.overflow = '';
            }
        };

        let currentLightboxIndex = 0;
        window.currentAlbumImages = [];

        window.openLightbox = (index) => {
            const modal = document.getElementById('lightbox-modal');
            const img = document.getElementById('lightbox-image');
            const counter = document.getElementById('lightbox-counter');
            
            if(modal && img && window.currentAlbumImages[index]) {
                currentLightboxIndex = index;
                img.src = window.currentAlbumImages[index];
                if(counter) counter.innerText = `${index + 1} / ${window.currentAlbumImages.length}`;
                modal.classList.remove('hidden');
            }
        };

        window.navLightbox = (dir) => {
            const img = document.getElementById('lightbox-image');
            const counter = document.getElementById('lightbox-counter');
            
            let newIndex = currentLightboxIndex + dir;
            if(newIndex >= window.currentAlbumImages.length) newIndex = 0;
            if(newIndex < 0) newIndex = window.currentAlbumImages.length - 1;
            
            currentLightboxIndex = newIndex;
            img.src = window.currentAlbumImages[currentLightboxIndex];
            if(counter) counter.innerText = `${currentLightboxIndex + 1} / ${window.currentAlbumImages.length}`;
        };

        window.closeLightbox = () => {
            const modal = document.getElementById('lightbox-modal');
            if(modal) modal.classList.add('hidden');
        };

        document.addEventListener('keydown', (e) => {
            const modal = document.getElementById('lightbox-modal');
            if(modal && !modal.classList.contains('hidden')) {
                if(e.key === 'Escape') closeLightbox();
                if(e.key === 'ArrowRight') navLightbox(1);
                if(e.key === 'ArrowLeft') navLightbox(-1);
            }
        });

        document.addEventListener('DOMContentLoaded', () => {
            const savedLang = localStorage.getItem('preferredLang') || 'si';
            selectLanguage(savedLang);
            fetchTours();
            fetchAlbums();
        });
    </script>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        AOS.init({ once: true, duration: 1000, offset: 100 });
        const navbar = document.getElementById("main-navbar");
        
        function updateNavbar() {
          if (window.scrollY > 50) {
            navbar.classList.add(
              "glass-nav",
              "shadow-xl",
              "border-brand-gold/50"
            );
            navbar.classList.remove("border-transparent");
          } else {
            navbar.classList.remove(
              "glass-nav",
              "shadow-xl",
              "border-brand-gold/50"
            );
            navbar.classList.add("border-transparent");
          }
        }
        window.addEventListener("scroll", updateNavbar);
        updateNavbar();
      });

      function toggleLanguage() {
          if (window.toggleMobileLang) window.toggleMobileLang();
          const lang = localStorage.getItem('preferredLang') || 'en';
          const display = document.getElementById('current-lang-display');
          if (display) display.innerText = lang.toUpperCase();
      }
    </script>
  </body>
</html>